<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.85.0"><title>X Ray Image Analysis | Saurav Maheshkar</title><meta property="twitter:site" content="@MaheshkarSaurav"><meta property="twitter:creator" content="@MaheshkarSaurav"><meta name=description content="ü©∫ Analysing Deep Learning Methods for X Ray Image Analysis"><meta property="og:site_name" content="Saurav Maheshkar"><meta property="og:title" content="X Ray Image Analysis | Saurav Maheshkar"><meta property="og:description" content="ü©∫ Analysing Deep Learning Methods for X Ray Image Analysis"><meta property="og:type" content="page"><meta property="og:url" content="https://sauravmaheshkar.github.io/project/xray-image-analysis/"><meta property="og:locale" content="en"><meta property="og:image" content="https://sauravmaheshkar.github.io/project/xray-image-analysis/featured-hex.png"><meta property="twitter:card" content="summary"><meta name=twitter:image content="https://sauravmaheshkar.github.io/project/xray-image-analysis/featured-hex.png"><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\\[','\\]']],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:['script','noscript','style','textarea','pre']}},window.addEventListener('load',a=>{document.querySelectorAll("mjx-container").forEach(function(a){a.parentElement.classList+='has-jax'})})</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><meta itemprop=name content="X Ray Image Analysis"><meta itemprop=description content="In this project, I went over the entire pipeline of creating a Binary Image Classifier using Tensorflow. I covered, all aspects of the pipeline such as experimenting with different network architectures and comparing metrics, pruning and quantization of the model for faster inference and finally two methods of deploying such models. I trained a Convolutional Neural Network(Efficient Net) to recognize chest X-rays of people with pneumonia and then created a interactive web application."><meta itemprop=datePublished content="2021-04-10T00:00:00+00:00"><meta itemprop=dateModified content="2021-04-10T00:00:00+00:00"><meta itemprop=wordCount content="793"><meta itemprop=image content="https://sauravmaheshkar.github.io/project/xray-image-analysis/featured-hex.png"><meta itemprop=keywords content><!--[if IE]><script src=//html5shiv.googlecode.com/svn/trunk/html5.js></script><![endif]--><link rel="shortcut icon" href=/img/favicon.ico type=image/x-icon><link rel=icon href=/img/favicon.ico type=image/x-icon><link rel=stylesheet href=/style.main.min.9fe1917e3fd8cb643bf35aa0995479b67c8cee6eeca071b3bbe20d3248308e3b.css integrity="sha256-n+GRfj/Yy2Q781qgmVR5tnyM7m7soHGzu+INMkgwjjs=" media=screen><script src=/panelset.min.078a92db9bd3228df502db3d9e0453c3cf3d910abe3f8deca0ad196c7071ad41.js type=text/javascript></script><script src=/main.min.38a0323c5b0bbb611c4874ba2d8fdaba57d20cc2b0d704b30250c235ba8b6d49.js type=text/javascript></script></head><body><div class="grid-container single"><header class="site-header pt4 pb2 mb4 bb b--transparent ph5 headroom z-max" role=banner><nav class="site-nav db dt-l w-100" role=navigation><a class="site-brand db dtc-l v-mid link no-underline w-100 w-33-l tc tl-l" href=https://sauravmaheshkar.github.io/ title=Home><img src=/img/android-chrome-256x256.png class="dib db-l h2 w-auto" alt="Saurav Maheshkar"></a><div class="site-links db dtc-l v-mid w-100 w-47-l tc tr-l mt3 mt0-l ttu tracked"><a class="link f6 f5-l dib pv1 ph2" href=/about/ title=About>About</a>
<a class="link f6 f5-l dib pv1 ph2" href=/blog/ title=Blog>Blog</a>
<a class="link f6 f5-l dib pv1 ph2 active" href=/project/ title="Project Portfolio">Projects</a>
<a class="link f6 f5-l dib pv1 ph2" href=https://sauravmaheshkar.substack.com/welcome title=Newsletter>Newsletter</a></div></nav></header><main class="page-main pa4" role=main><section class="page-content mw7 center"><article class="post-content pa0 ph4-l"><header class=post-header><h1 class="f1 lh-solid measure-narrow mb3 fw4">X Ray Image Analysis</h1><p class="f6 measure lh-copy mv1">By Saurav Maheshkar in <a href=https://sauravmaheshkar.github.io/categories/python>python</a> <a href=https://sauravmaheshkar.github.io/categories/tensorflow>tensorflow</a></p><p class="f7 db mv0 ttu">April 10, 2021</p><div class="ph0 pt5"><a class="btn-links mr2 ba dib" href=https://deepnote.com/@saurav-maheshkar/X-Ray-Image-Classification-M7ID1ABnTqysUd7USuIaUw target=_blank rel=noopener><i class="fas fa-book fa-lg fa-fw mr2"></i>Notebook</a>
<a class="btn-links mr2 ba dib" href=https://share.streamlit.io/sauravmaheshkar/x-ray-image-classification/streamlit/demo/app.py target=_blank rel=noopener><i class="fas fa-microchip fa-lg fa-fw mr2"></i>Web Application</a>
<a class="btn-links mr2 ba dib" href=https://github.com/SauravMaheshkar/X-Ray-Image-Classification/ target=_blank rel=noopener><i class="fas fa-door-open fa-lg fa-fw mr2"></i>Github Repository</a></div></header><section class="post-body pt5 pb4"><p><img src="https://github.com/SauravMaheshkar/X-Ray-Image-Classification/blob/main/assets/Banner%20Image.png?raw=true" alt></p><p>In this project, I went over the entire pipeline of creating a Binary Image Classifier using Tensorflow. I covered, all aspects of the pipeline such as experimenting with different network architectures and comparing metrics, pruning and quantization of the model for faster inference and finally two methods of deploying such models. I trained a Convolutional Neural Network(Efficient Net) to recognize chest X-rays of people with pneumonia and then created a interactive web application.</p><p>The Dataset for this project, titled &ldquo;Chest X-Ray Images (Pneumonia)&rdquo; was taken from Kaggle and was uploaded by Paul Mooney. The dataset was organized into 3 folders ( train, test, val ) and contained subfolders for each image category (Pneumonia/Normal). There were 5,863 X-Ray images (JPEG) and 2 categories (Pneumonia/Normal). These images were then converted into TFRecords format, zipped and then upload as a Shared Dataset to the Deepnote Project.</p><h2 id=the-model->The Model üë∑‚Äç‚ôÄÔ∏è
<a href=#the-model-><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><h3 id=-transfer-learning>üèó Transfer Learning
<a href=#-transfer-learning><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>First things first; Transfer learning(TL) is not a machine learning model or technique; it is rather a <strong>&ldquo;design methodology&rdquo;</strong> within machine learning. The general idea of transfer learning is to use knowledge learned from tasks for which a lot of labelled data is available in settings where only little labelled data is available. Creating labelled data is expensive, so optimally leveraging existing datasets is key.</p><p>In a traditional machine learning model, the primary goal is to generalise to unseen data based on patterns learned from the training data. With transfer learning, you attempt to kickstart this generalisation process by starting from patterns that have been learned for a different task. Essentially, instead of starting the learning process from a (often randomly initialised) blank sheet, you start from patterns that have been learned to solve a different task.</p><p>Convolutional Neural Networks' features are more generic in early layers and more original-dataset-specific in later layers. Thus, we often use these as a backbone / starting point while creating new models. A common practice is to make these base models non-trainable and just learn the later layers. You might think that this will decrease the performance, but as we&rsquo;ll see from training. Transfer Learning is still a viable option.</p><h3 id=-efficientnetb0>‚öñÔ∏è EfficientNetB0
<a href=#-efficientnetb0><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p><img src="https://github.com/SauravMaheshkar/X-Ray-Image-Classification/blob/main/assets/effnet.png?raw=true" alt></p><p><strong>Convolutional neural networks (CNNs)</strong> are commonly developed at a fixed resource cost, and then scaled up in order to achieve better accuracy when more resources are made available. For example, ResNet can be scaled up from ResNet-18 to ResNet-200 by increasing the number of layers. The conventional practice for model scaling is to arbitrarily increase the CNN depth or width, or to use larger input image resolution for training and evaluation. While these methods do improve accuracy, they usually require tedious manual tuning, and still often yield suboptimal performance. Instead, the authors of
<a href=https://arxiv.org/abs/1905.11946 target=_blank rel=noopener>&ldquo;EfficientNet: Rethinking Model Scaling for Convolutional Neural Networks (ICML 2019)"</a> found a more principled method to scale up a CNN to obtain better accuracy and efficiency.</p><p>They proposed a novel model scaling method that uses a simple yet highly effective compound coefficient to scale up CNNs in a more structured manner. Unlike conventional approaches that arbitrarily scale network dimensions, such as width, depth and resolution, their method uniformly scales each dimension with a fixed set of scaling coefficients. The resulting models named EfficientNets, superpassed state-of-the-art accuracy with up to 10x better efficiency (smaller and faster).</p><h2 id=-deployment>üöÄ Deployment
<a href=#-deployment><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>As deep learning is infiltrating most industries, learning how to deploy models into production is becoming an extremely important skill to master. In this project, I went over two methods to deploy the trained models</p><ol><li>Web Application built using Streamlit (Uses Quantized TFLite model)</li><li>Using Tensorflow Serving (Uses SavedModel Format)</li></ol><h3 id=streamlit-web-application>Streamlit Web Application
<a href=#streamlit-web-application><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p><img src="https://github.com/SauravMaheshkar/X-Ray-Image-Classification/blob/main/assets/xray-app.gif?raw=true" alt></p><p>Streamlit is probably the fastest way to share data models. Rather than Flask or Django which requires the developer to know a little bit about HTML, CSS and JavaScript, using Streamlit you can build responsive applications using just python. It has an extremely simple API and has a free sharing platform, where you can deploy your local model to a website in just a few clicks. The code for this app can be found in the accompanying Github Repository. I have also shared a
<a href=https://github.com/SauravMaheshkar/X-Ray-Image-Classification/packages/745856 target=_blank rel=noopener>Docker Image</a> for anyone to be able to clone and run the model locally using just 2 commands.</p><h3 id=tensorflow-serving>Tensorflow Serving
<a href=#tensorflow-serving><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>TensorFlow Serving is a flexible, high-performance serving system for machine learning models, designed for production environments. TensorFlow Serving makes it easy to deploy new algorithms and experiments, while keeping the same server architecture and APIs. TensorFlow Serving provides out-of-the-box integration with TensorFlow models, but can be easily extended to serve other types of models and data. I have upload a
<a href=https://github.com/SauravMaheshkar/X-Ray-Image-Classification/packages/746338 target=_blank rel=noopener>custom serving image</a> (with the model mounted) built on top of the tensorflow/serving image. You can clone this image expose a port and call it using a REST API.</p><details closed class="f6 fw7 input-reset"><dl class="f6 lh-copy"><dt class=fw7>Posted on:</dt><dd class="fw5 ml0">April 10, 2021</dd></dl><dl class="f6 lh-copy"><dt class=fw7>Length:</dt><dd class="fw5 ml0">4 minute read, 793 words</dd></dl><dl class="f6 lh-copy"><dt class=fw7>Categories:</dt><dd class="fw5 ml0"><a href=https://sauravmaheshkar.github.io/categories/python>python</a> <a href=https://sauravmaheshkar.github.io/categories/tensorflow>tensorflow</a></dd></dl><dl class="f6 lh-copy"><dt class=fw7>See Also:</dt></dl></details></section><footer class=post-footer><div class="post-pagination dt w-100 mt4 mb2"><a class="prev dtc pr2 tl v-top fw6" href=https://sauravmaheshkar.github.io/project/stellarflare/>&larr; Stellarflare</a>
<a class="next dtc pl2 tr v-top fw6" href=https://sauravmaheshkar.github.io/project/bias-compressed/>Compressed DNNs Forget &rarr;</a></div></footer></article></section></main><footer class="site-footer pv4 bt b--transparent ph5" role=contentinfo><nav class="db dt-l w-100"><p class="site-copyright f7 db dtc-l v-mid w-100 w-33-l tc tl-l pv2 pv0-l mv0 lh-copy">&copy; 2021 Weights and Biases, New Delhi
<span class=middot-divider></span>Made with <span xmlns:dct=http://purl.org/dc/terms/ property="dct:title"><a xmlns:dct=http://purl.org/dc/terms/ href=https://github.com/hugo-apero/ rel=dct:source>Hugo Ap√©ro</a></span>.<br>Based on <span xmlns:dct=http://purl.org/dc/terms/ property="dct:title"><a xmlns:dct=http://purl.org/dc/terms/ href=https://github.com/formspree/blogophonic-hugo rel=dct:source>Blogophonic</a></span> by <a xmlns:cc=http://creativecommons.org/ns# href=https://formspree.io property="cc:attributionName" rel=cc:attributionurl>Formspree</a>.</p><div class="site-social-links db dtc-l v-mid w-100 w-33-l tc pv2 pv0-l mv0"><div class=social-icon-links aria-hidden=true><a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href=https://github.com/SauravMaheshkar title=github target=_blank rel=noopener><i class="fab fa-github fa-lg fa-fw"></i></a>
<a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href=https://www.instagram.com/sauravvmaheshkar/ title=instagram target=_blank rel=noopener><i class="fab fa-instagram fa-lg fa-fw"></i></a>
<a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href=https://twitter.com/MaheshkarSaurav title=twitter target=_blank rel=noopener><i class="fab fa-twitter fa-lg fa-fw"></i></a>
<a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href=https://orcid.org/0000-0002-5371-4651 title=orcid target=_blank rel=noopener><i class="ai ai-orcid fa-lg fa-fw"></i></a>
<a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href=/blog/index.xml title=rss><i class="fas fa-rss fa-lg fa-fw"></i></a></div></div><div class="site-links f6 db dtc-l v-mid w-100 w-67-l tc tr-l pv2 pv0-l mv0"><a class="dib pv1 ph2 link" href=/license/ title=License>License</a>
<a class="dib pv1 ph2 link" href=/contact/ title="Contact form">Contact</a></div></nav></footer></div></body></html>